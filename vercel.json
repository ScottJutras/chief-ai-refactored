{
  "version": 2,
  "functions": {
    "api/webhook.js": {
      "memory": 2048,
      "maxDuration": 15,
      "excludeFiles": "{docs/**,public/**,dashboard/**,parse/**,deep-dive/**,api/index.js,node_modules/pdfkit/**,node_modules/exceljs/**,node_modules/@google-cloud/**,node_modules/google-auth-library/**}"
    },
    "api/index.js": {
      "memory": 1024,
      "maxDuration": 10
    },
    "api/ping.js": {
      "memory": 256,
      "maxDuration": 5
    },
    "api/cron/refresh_docs.js": {
      "memory": 1024,
      "maxDuration": 30,
      "includeFiles": "{scripts/rag_loader.js,docs/howto/**}"
    }
  },
  "routes": [
    { "src": "^/api/cron/refresh_docs$", "dest": "/api/cron/refresh_docs.js" },

    { "src": "^/api/webhook/reminders/cron/(.*)$", "dest": "/api/webhook.js" },
    { "src": "^/api/webhook$", "dest": "/api/webhook.js" },
    { "src": "^/webhook$", "dest": "/api/webhook.js" },

    { "src": "^/api/ping$", "dest": "/api/ping.js" },
    { "src": "^/(.*)$", "dest": "/api/index.js" }
  ],
  "crons": [
    {
      "path": "/api/cron/refresh_docs",
      "schedule": "0 3 * * 1"
    }
  ]
}
